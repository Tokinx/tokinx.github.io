mixed-port: 7890
allow-lan: true
external-controller: 0.0.0.0:9090
mode: Rule
log-level: info
ipv6: true

dns:
  enable: true
  ipv6: true
  default-nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - 1.1.1.1
    - 8.8.8.8
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - 1.1.1.1
    - 8.8.8.8

proxies:

proxy-groups:
  # 基础选择器
  - name: Switch
    type: select
    proxies:
      - <all>
  # 业务分流
  - name: Coding
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT
  - name: Media
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT
  - name: Google
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT
  - name: Microsoft
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT
  - name: Apple
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT
  - name: AdGuard
    type: select
    proxies:
      - REJECT
      - DIRECT
  - name: Catch
    type: select
    proxies:
      - Switch
      - <all>
      - <countries>
      - DIRECT

rule-providers:
  Advertising:
    type: http
    behavior: classical
    path: ./ruleset/Advertising.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml
    interval: 86400
  Google:
    type: http
    behavior: classical
    path: ./ruleset/Google.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    path: ./ruleset/Microsoft.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    interval: 86400
  OneDrive:
    type: http
    behavior: classical
    path: ./ruleset/OneDrive.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml
    interval: 86400
  Apple:
    type: http
    behavior: classical
    path: ./ruleset/Apple.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml
    interval: 86400
  GitHub:
    type: http
    behavior: classical
    path: ./ruleset/GitHub.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    interval: 86400
  YouTube:
    type: http
    behavior: classical
    path: ./ruleset/YouTube.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    interval: 86400
  YouTubeMusic:
    type: http
    behavior: classical
    path: ./ruleset/YouTubeMusic.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml
    interval: 86400
  Spotify:
    type: http
    behavior: classical
    path: ./ruleset/Spotify.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    path: ./ruleset/Telegram.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    interval: 86400
  Twitter:
    type: http
    behavior: classical
    path: ./ruleset/Twitter.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml
    interval: 86400
  LAN:
    type: http
    behavior: classical
    path: ./ruleset/LAN.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/LAN/LAN.yaml
    interval: 86400
  ChinaMax:
    type: http
    behavior: classical
    path: ./ruleset/ChinaMax.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax.yaml
    interval: 86400
rules:
  # 局域网与常见私有网段直连
  - RULE-SET,LAN,DIRECT
  # 广告拦截（与 AdGuard 分组对齐）
  - RULE-SET,Advertising,AdGuard
  # 编程相关流量
  - DOMAIN-SUFFIX,openai.com,Coding
  - DOMAIN-SUFFIX,chatgpt.com,Coding
  - DOMAIN-KEYWORD,openai,Coding
  - DOMAIN-SUFFIX,gemini.google.com,Coding
  - DOMAIN-SUFFIX,aistudio.google.com,Coding
  - DOMAIN-SUFFIX,ai.google.dev,Coding
  - DOMAIN-SUFFIX,generativelanguage.googleapis.com,Coding
  - DOMAIN-SUFFIX,makersuite.google.com,Coding
  - DOMAIN-SUFFIX,x.ai,Coding
  - DOMAIN-SUFFIX,grok.x.ai,Coding
  - DOMAIN-KEYWORD,grok,Coding
  - DOMAIN-SUFFIX,anthropic.com,Coding
  - DOMAIN-SUFFIX,api.anthropic.com,Coding
  - DOMAIN-SUFFIX,claude.ai,Coding
  - DOMAIN-KEYWORD,claude,Coding
  - DOMAIN-SUFFIX,perplexity.ai,Coding
  - DOMAIN-SUFFIX,api.perplexity.ai,Coding
  - DOMAIN-SUFFIX,pplx.ai,Coding
  - DOMAIN-SUFFIX,cohere.com,Coding
  - DOMAIN-SUFFIX,cohere.ai,Coding
  - DOMAIN-SUFFIX,api.cohere.ai,Coding
  - DOMAIN-SUFFIX,mistral.ai,Coding
  - DOMAIN-SUFFIX,api.mistral.ai,Coding
  - DOMAIN-SUFFIX,together.ai,Coding
  - DOMAIN-SUFFIX,together.xyz,Coding
  - DOMAIN-SUFFIX,api.together.xyz,Coding
  - DOMAIN-SUFFIX,openrouter.ai,Coding
  - DOMAIN-SUFFIX,api.openrouter.ai,Coding
  - DOMAIN-SUFFIX,huggingface.co,Coding
  - DOMAIN-SUFFIX,api-inference.huggingface.co,Coding
  - DOMAIN-SUFFIX,stability.ai,Coding
  - DOMAIN-SUFFIX,api.stability.ai,Coding
  - DOMAIN-SUFFIX,replicate.com,Coding
  - DOMAIN-SUFFIX,replicate.ai,Coding
  - DOMAIN-SUFFIX,api.replicate.com,Coding
  - DOMAIN-SUFFIX,copilot.microsoft.com,Coding
  - RULE-SET,GitHub,Coding
  # 始终直连
  - DOMAIN-KEYWORD,bilibili,DIRECT
  # 平台分流（使用 rule-providers）
  - RULE-SET,YouTube,Media
  - RULE-SET,YouTubeMusic,Media
  - RULE-SET,Spotify,Media
  - RULE-SET,Telegram,Media
  - RULE-SET,Twitter,Media
  - RULE-SET,Google,Google
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,OneDrive,Microsoft
  - RULE-SET,Apple,Apple
  # 中国大陆直连（域名与 IP）
  - RULE-SET,ChinaMax,DIRECT
  - GEOIP,CN,DIRECT
  # 兜底（漏网之鱼）
  - MATCH,Catch

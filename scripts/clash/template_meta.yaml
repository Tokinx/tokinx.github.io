mixed-port: 7890
allow-lan: true
external-controller: 0.0.0.0:9090
mode: Rule
log-level: info
ipv6: true
tcp-concurrent: true
unified-delay: true
dns:
  enable: true
  ipv6: true
  prefer-h3: false
  default-nameserver:
    - 119.29.29.29                       # Tencent DNS (DNSPod)
    - 223.5.5.5                          # AliDNS
    - 1.1.1.1
    - 8.8.8.8
  nameserver:
    - https://doh.pub/dns-query          # Tencent DoH
    - https://dns.alidns.com/dns-query   # AliDNS DoH
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - 119.29.29.29                       # Tencent DNS (DNSPod)
    - 223.5.5.5                          # AliDNS
    - 1.1.1.1
    - 8.8.8.8
  nameserver-policy:
    geosite:cn:
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
      - https://1.12.12.12/dns-query
      - https://223.5.5.5/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - https://1.12.12.12/dns-query
    - https://223.5.5.5/dns-query
sniffer:
  enable: true
  parse-pure-ip: true
  override-destination: true
  sniffing:
    - tls
    - http
  force-domain:
    - "+.openai.com"
    - "+.chatgpt.com"
    - "+.anthropic.com"
    - "+.claude.ai"
    - "+.x.ai"
    - "+.grok.x.ai"
    - "+.perplexity.ai"
    - "+.pplx.ai"
    - "+.cohere.ai"
    - "+.cohere.com"
    - "+.mistral.ai"
    - "+.together.ai"
    - "+.together.xyz"
    - "+.openrouter.ai"
    - "+.huggingface.co"
    - "+.stability.ai"
    - "+.replicate.com"
  skip-domain:
    - "msftconnecttest.com"
    - "msftncsi.com"
proxies:
proxy-groups:
  # 基础选择器
  - name: 默认节点
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/liuliang(5).png
    proxies:
      - <all>
  # 业务分流
  - name: 编程开发
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/ChatGPT.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: 影音娱乐
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/YouTube_01.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: Google
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Google.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: Microsoft
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Microsoft.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: Apple
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Apple_01.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: Paypal
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Paypal.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
  - name: 广告拦截
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/AdGuard.png
    proxies:
      - REJECT
      - DIRECT
  - name: 漏网之鱼
    type: select
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/warp.png
    proxies:
      - 默认节点
      - <all>
      - <countries>
      - DIRECT
rule-providers:
  Advertising:
    type: http
    behavior: classical
    path: ./ruleset/Advertising.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml
    interval: 86400
  Google:
    type: http
    behavior: classical
    path: ./ruleset/Google.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    path: ./ruleset/Microsoft.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    interval: 86400
  OneDrive:
    type: http
    behavior: classical
    path: ./ruleset/OneDrive.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml
    interval: 86400
  Apple:
    type: http
    behavior: classical
    path: ./ruleset/Apple.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml
    interval: 86400
  PayPal:
    type: http
    behavior: classical
    path: ./ruleset/PayPal.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml
    interval: 86400
  GitHub:
    type: http
    behavior: classical
    path: ./ruleset/GitHub.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    interval: 86400
  Gemini:
    type: http
    behavior: classical
    path: ./ruleset/Gemini.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
    interval: 86400
  OpenAI:
    type: http
    behavior: classical
    path: ./ruleset/OpenAI.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    interval: 86400
  Claude:
    type: http
    behavior: classical
    path: ./ruleset/Claude.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
    interval: 86400
  Anthropic:
    type: http
    behavior: classical
    path: ./ruleset/Anthropic.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.yaml
    interval: 86400
  Copilot:
    type: http
    behavior: classical
    path: ./ruleset/Copilot.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
    interval: 86400
  MicrosoftEdge:
    type: http
    behavior: classical
    path: ./ruleset/MicrosoftEdge.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/MicrosoftEdge/MicrosoftEdge.yaml
    interval: 86400
  Cloudflare:
    type: http
    behavior: classical
    path: ./ruleset/Cloudflare.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Cloudflare/Cloudflare.yaml
    interval: 86400
  # YouTube:
  #   type: http
  #   behavior: classical
  #   path: ./ruleset/YouTube.yaml
  #   url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
  #   interval: 86400
  YouTube:
    type: http
    behavior: classical
    path: ./ruleset/YouTube.yaml
    url: https://raw.githubusercontent.com/dler-io/Rules/refs/heads/main/Clash/Provider/Media/YouTube.yaml
    interval: 86400
  Spotify:
    type: http
    behavior: classical
    path: ./ruleset/Spotify.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    path: ./ruleset/Telegram.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    interval: 86400
  Twitter:
    type: http
    behavior: classical
    path: ./ruleset/Twitter.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml
    interval: 86400
  Download:
    type: http
    behavior: classical
    path: ./ruleset/Download.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml
    interval: 86400
  LAN:
    type: http
    behavior: classical
    path: ./ruleset/LAN.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
    interval: 86400
  ChinaMax:
    type: http
    behavior: classical
    path: ./ruleset/ChinaMax.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax.yaml
    interval: 86400
  ChinaMax_IP:
    type: http
    behavior: classical
    path: ./ruleset/ChinaMax_IP.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax_IP/ChinaMax_IP.yaml
    interval: 86400
rules:
  # 局域网与本机优先直连
  - DOMAIN,localhost,DIRECT
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.1/8,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR6,::1/128,DIRECT,no-resolve
  - IP-CIDR6,fc00::/7,DIRECT,no-resolve
  - IP-CIDR6,fe80::/10,DIRECT,no-resolve
  # 局域网与常见私有网段直连
  - RULE-SET,LAN,DIRECT
  # 广告拦截
  - RULE-SET,Advertising,广告拦截
  # CDN加速节点
  - RULE-SET,Cloudflare,默认节点
  # 编程相关流量
  - RULE-SET,GitHub,编程开发
  - RULE-SET,OpenAI,编程开发
  - RULE-SET,Claude,编程开发
  - RULE-SET,Anthropic,编程开发
  - RULE-SET,Copilot,编程开发
  - RULE-SET,MicrosoftEdge,编程开发
  - DOMAIN-SUFFIX,x.ai,编程开发
  - DOMAIN-SUFFIX,grok.x.ai,编程开发
  - DOMAIN-SUFFIX,grok.com,编程开发
  - DOMAIN-SUFFIX,perplexity.ai,编程开发
  - DOMAIN-SUFFIX,api.perplexity.ai,编程开发
  - DOMAIN-SUFFIX,pplx.ai,编程开发
  - DOMAIN-SUFFIX,cohere.com,编程开发
  - DOMAIN-SUFFIX,cohere.ai,编程开发
  - DOMAIN-SUFFIX,api.cohere.ai,编程开发
  - DOMAIN-SUFFIX,mistral.ai,编程开发
  - DOMAIN-SUFFIX,api.mistral.ai,编程开发
  - DOMAIN-SUFFIX,together.ai,编程开发
  - DOMAIN-SUFFIX,together.xyz,编程开发
  - DOMAIN-SUFFIX,api.together.xyz,编程开发
  - DOMAIN-SUFFIX,openrouter.ai,编程开发
  - DOMAIN-SUFFIX,api.openrouter.ai,编程开发
  - DOMAIN-SUFFIX,huggingface.co,编程开发
  - DOMAIN-SUFFIX,api-inference.huggingface.co,编程开发
  - DOMAIN-SUFFIX,stability.ai,编程开发
  - DOMAIN-SUFFIX,api.stability.ai,编程开发
  - DOMAIN-SUFFIX,replicate.com,编程开发
  - DOMAIN-SUFFIX,replicate.ai,编程开发
  - DOMAIN-SUFFIX,api.replicate.com,编程开发
  # 平台分流
  - RULE-SET,YouTube,影音娱乐
  - DOMAIN,music.youtube.com,影音娱乐
  - RULE-SET,Spotify,影音娱乐
  - RULE-SET,Telegram,影音娱乐
  - RULE-SET,Twitter,影音娱乐
  - RULE-SET,OneDrive,影音娱乐
  - RULE-SET,Download,影音娱乐
  - RULE-SET,Google,Google
  - RULE-SET,Gemini,Google
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,Apple,Apple
  - RULE-SET,PayPal,PayPal
  # 大陆直连
  - RULE-SET,ChinaMax,DIRECT
  - RULE-SET,ChinaMax_IP,DIRECT
  - GEOIP,CN,DIRECT
  - DOMAIN-KEYWORD,bilibili,DIRECT
  # 漏网之鱼
  - MATCH,漏网之鱼

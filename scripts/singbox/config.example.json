{
  "log": { "level": "info" },
  "inbounds": [
    {
      "type": "direct",
      "tag": "reality-guard",
      "listen": "::",
      "listen_port": 31735,
      "network": "tcp",
      "override_address": "127.0.0.1",
      "override_port": 31736
    },
    {
      "type": "vless",
      "tag": "reality-in",
      "listen": "127.0.0.1",
      "listen_port": 31736,
      "users": [{ "uuid": "⭕️YOUR UUID HERE", "flow": "xtls-rprx-vision" }],
      "tls": {
        "enabled": true,
        "server_name": "music.apple.com",
        "alpn": ["h2", "http/1.1"],
        "reality": {
          "enabled": true,
          "handshake": { "server": "music.apple.com", "server_port": 443 },
          "private_key": "⭕️YOUR PRIVATE KEY HERE",
          "short_id": ["⭕️YOUR SHORT ID HERE"],
          "max_time_difference": "1m"
        }
      }
    },
    {
      "type": "hysteria2",
      "tag": "hy2-in",
      "listen": "::",
      "listen_port": 32735,
      "users": [{ "password": "⭕️YOUR PASSWORD HERE" }],
      "obfs": { "type": "salamander", "password": "⭕️YOUR OBFS PASSWORD HERE" },
      "tls": {
        "enabled": true,
        "server_name": "music.apple.com",
        "alpn": ["h3"],
        "certificate_path": "/etc/sing-box/server.pem",
        "key_path": "/etc/sing-box/server.key"
      }
    }
  ],
  "outbounds": [
    { "type": "direct", "tag": "direct" },
    { "type": "block", "tag": "block" }
  ],
  "route": {
    "rules": [
      { "action": "sniff", "inbound": ["reality-guard"], "sniffer": ["tls"], "timeout": "300ms" },
      { "action": "route", "inbound": ["reality-guard"], "domain": ["music.apple.com"], "outbound": "direct" },
      { "action": "reject", "inbound": ["reality-guard"], "method": "drop" }
    ],
    "final": "direct"
  }
}
